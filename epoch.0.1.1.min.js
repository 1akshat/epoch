(function(g){var f,c=/[-+,> ]/;g([],f=function(b,e){function a(e){function k(){l&&(f&&l!=f)&&(f==e&&(m||(m=c.test(s)&&b.createDocumentFragment()))||f).insertBefore(l,n||null)}for(var m,q,n,f,l,g=arguments,t=g[0],x=0;x<g.length;x++){var s=g[x];if("object"==typeof s){q=!1;if(s instanceof Array){l=b.createDocumentFragment();for(var y=0;y<s.length;y++)l.appendChild(a(s[y]));s=l}if(s.nodeType)l=s,k(),f=s,n=0;else for(y in s)l[y]=s[y]}else if(q)q=!1,l.appendChild(b.createTextNode(s));else{1>x&&(e=null);
q=!0;if(t=s.replace(d,function(d,c,m,q,u,t){c&&(k(),"-"==c||"+"==c?(f=(n=l||f).parentNode,l=null,"+"==c&&(n=n.nextSibling)):("<"==c?f=l=(l||f).parentNode:(","==c?f=e:l&&(f=l),l=null),n=0),l&&(f=l));if((d=!m&&q)||!l&&(m||u))"$"==d?(d=g[++x],f.appendChild(b.createTextNode(d))):(d=d||a.defaultTag,(c=r&&g[x+1]&&g[x+1].name)&&(d="<"+d+' name="'+c+'">'),l=w&&~(h=d.indexOf("|"))?b.createElementNS(w[d.slice(0,h)],d.slice(h+1)):b.createElement(d));if(m)if("$"==q&&(q=g[++x]),"#"==m)l.id=q;else if(c=(d=l.className)&&
(" "+d+" ").replace(" "+q+" "," "),"."==m)l.className=d?(c+q).substring(1):q;else if("!"==s){var y;r?a("div",l,"<").innerHTML="":(y=l.parentNode)&&y.removeChild(l)}else c=c.substring(1,c.length-1),c!=d&&(l.className=c);u&&("$"==t&&(t=g[++x]),"style"==u?l.style.cssText=t:(m="!"==u.charAt(0)?(u=u.substring(1))&&"removeAttribute":"setAttribute",t=""===t?u:t,w&&~(h=u.indexOf("|"))?l[m+"NS"](w[u.slice(0,h)],u.slice(h+1),t):l[m](u,t)));return""}))throw new SyntaxError("Unexpected char "+t+" in "+s);k();
f=t=l||f}}e&&m&&e.appendChild(m);return t}c=e||c;var d=/(?:\s*([-+ ,<>]))?\s*(\.|!\.?|#)?([-\w%$|]+)?(?:\[([^\]=]+)=?['"]?([^\]'"]*)['"]?\])?/g,h,w=!1;b=b||document;var r="object"==typeof b.createElement;a.addNamespace=function(a,d){b.createElementNS?(w||(w={}))[a]=d:b.namespaces.add(a,d)};a.defaultTag="div";a.forDocument=f;return a})})(function(g,f,c){c=c||f;"function"===typeof define?define([],function(){return c()}):"undefined"==typeof window?require("./node-html")(module,c):put=c()});
(function(){var g,f,c,b={}.hasOwnProperty,e=function(a,d){function h(){this.constructor=a}for(var w in d)b.call(d,w)&&(a[w]=d[w]);h.prototype=d.prototype;a.prototype=new h;a.__super__=d.prototype;return a};null==window.Epoch&&(window.Epoch={});null==(c=window.Epoch).Chart&&(c.Chart={});null==(c=window.Epoch).Time&&(c.Time={});null==(c=window.Epoch).Util&&(c.Util={});null==(c=window.Epoch).Formats&&(c.Formats={});Epoch.isArray=function(a){return"array"===$.type(a)};Epoch.isObject=function(a){return"object"===
$.type(a)};Epoch.warn=function(a){return(console.warn||console.log)("Warning: "+a)};Epoch.Util.copy=function(a){var d,h,b;if(null==a)return null;d={};for(h in a)b=a[h],d[h]=b;return d};Epoch.Util.defaults=function(a,d){var h,b;b=Epoch.Util.copy(a);for(h in d)null!=a[h]&&null!=d[h]?!Epoch.isArray(a[h])&&Epoch.isObject(a[h])&&Epoch.isObject(d[h])?b[h]=Epoch.Util.defaults(a[h],d[h]):b[h]=a[h]:b[h]=null!=a[h]?a[h]:d[h];return b};Epoch.Util.formatSI=function(a,d,h){var b,e,c,k;null==d&&(d=1);null==h&&
(h=!1);if(1E3>a)return a;k="KMGTPEZY".split("");for(e in k)if(c=k[e],b=Math.pow(10,3*((e|0)+1)),a>=b&&a<Math.pow(10,3*((e|0)+2))){a/=b;if((a|0)!==a||h)a=a.toFixed(d);return""+a+" "+c}};Epoch.Util.dasherize=function(a){return a.replace("\n","").replace(/\s+/,"-").toLowerCase()};Epoch.Util.domain=function(a,d){var h,b,e,c,k,m,f,g;null==d&&(d="x");e={};c=0;for(m=a.length;c<m;c++)for(h=a[c],g=h.values,k=0,f=g.length;k<f;k++)h=g[k],e[h[d]]=!0;c=[];for(b in e)c.push(b);return c};Epoch.Formats.regular=function(a){return a};
Epoch.Formats.si=function(a){return Epoch.Util.formatSI(a)};f=d3.time.format("%I:%M:%S %p");Epoch.Formats.seconds=function(a){return f(new Date(1E3*a))};Epoch.Events=function(){function a(){this._events={}}a.prototype.on=function(a,h){var b;if(null!=h)return null==(b=this._events)[a]&&(b[a]=[]),this._events[a].push(h)};a.prototype.off=function(a,h){var b,e;if(Epoch.isObject(this._events[a])){if(null==h)return delete this._events[a];for(e=[];0<=(b=this._events[a].indexOf(h));)e.push(this._events[a].splice(b,
1));return e}};a.prototype.trigger=function(a){var h,b,e,c,k,m,f;if(Epoch.isObject(this._events[a])){h=function(){var a,d,h;h=[];e=a=1;for(d=arguments.length;1<=d?a<d:a>d;e=1<=d?++a:--a)h.push(arguments[e]);return h}.apply(this,arguments);m=this._events[a];f=[];c=0;for(k=m.length;c<k;c++)b=m[c],f.push(b.apply(this,h));return f}};return a}();Epoch.Chart.Base=function(a){function d(a){this.options=a;this.setData(this.options.data||[]);null!=this.options.el&&(this.el=$(this.options.el));this.width=this.options.width;
this.height=this.options.height;null!=this.el?(null==this.width&&(this.width=$(this.el).width()),null==this.height&&(this.height=$(this.el).height())):(null==this.width&&(this.width=h.dimensions.width),null==this.height&&(this.height=h.dimensions.height))}var h;e(d,a);h={dimensions:{width:320,height:240}};d.prototype.setData=function(a){var d,h,b,e,c;d=1;e=0;for(c=a.length;e<c;e++)b=a[e],h=["layer"],h.push("category"+d),null!=b.label&&h.push(Epoch.Util.dasherize(b.label)),b.className=h.join(" "),
d++;return this.data=a};d.prototype.update=function(a,d){null==d&&(d=!0);this.setData(a);if(d)return this.draw()};d.prototype.draw=function(){};d.prototype.extent=function(a){return[d3.min(this.data,function(d){return d3.min(d.values,a)}),d3.max(this.data,function(d){return d3.max(d.values,a)})]};return d}(Epoch.Events);Epoch.Chart.SVG=function(a){function d(a){this.options=null!=a?a:{};d.__super__.constructor.call(this,this.options);this.svg=null!=this.el?d3.select(this.el.get(0)).append("svg"):
d3.select(document.createElement("svg"));this.svg.attr("width",this.width).attr("height",this.height)}e(d,a);return d}(Epoch.Chart.Base);Epoch.Chart.Canvas=function(a){function d(a){this.options=null!=a?a:{};d.__super__.constructor.call(this,this.options);this.canvas=$("<canvas></canvas>");this.canvas.attr("width",this.width).attr("height",this.height);null!=this.el&&this.el.append(this.canvas);this.ctx=this.canvas.get(0).getContext("2d")}e(d,a);d.prototype.getStyles=function(a){return g.getStyles(a,
this.el)};return d}(Epoch.Chart.Base);g=function(){function a(){}a.cache={};a.styleList=["fill","stroke","stroke-width"];a.container=null;a.load=function(){$("body").append('<div id="_canvas_css_reference"></div>');return a.container=$("#_canvas_css_reference","body")};a.containerId=function(a){return""+a.attr("id")+"."+a.attr("class")};a.getSVG=function(d){var b,e;e=a.containerId(d);b=a.svgElements[e];null==b&&(d=$(d).clone().html("<svg></svg>"),a.svgContainer.append(d),b=a.svgElements[e]=$("svg",
d));return b};a.getStyles=function(d,b){var e,c,p,k,f,g,n,v;c=""+a.containerId(b)+"__"+d;e=a.cache[c];if(null!=e)return e;e=$(b).clone().html("<svg></svg>");e.removeAttr("style");a.container.append(e);n=$("svg",e);k=d.split(/\s+/);for(f=g=put(k.shift());k.length;)p=put(k.shift()),f.appendChild(p),f=p;n.html(g);k=$(d,n);f={};v=a.styleList;g=0;for(n=v.length;g<n;g++)p=v[g],f[p]=k.css(p);a.cache[c]=f;$(e,a.container).remove();return f};return a}();$(g.load);Epoch.Chart.Plot=function(a){function d(a){var e,
c,k,f;this.options=null!=a?a:{};a=Epoch.Util.copy(this.options.margins)||{};d.__super__.constructor.call(this,this.options=Epoch.Util.defaults(this.options,b));this.margins={};f=["top","right","bottom","left"];c=0;for(k=f.length;c<k;c++)e=f[c],this.margins[e]=this.options.margins[e],null!=a[e]||this.hasAxis(e)||(this.margins[e]=6);this.svg=this.svg.append("g").attr("transform","translate("+this.margins.left+", "+this.margins.top+")")}var b;e(d,a);b={margins:{top:25,right:50,bottom:25,left:50},axes:["left",
"bottom"],ticks:{top:14,bottom:14,left:5,right:5},tickFormats:{top:Epoch.Formats.regular,bottom:Epoch.Formats.regular,left:Epoch.Formats.si,right:Epoch.Formats.si}};d.prototype.setTickFormat=function(a,d){return this.options.tickFormats[a]=d};d.prototype.hasAxis=function(a){return-1<this.options.axes.indexOf(a)};d.prototype.innerWidth=function(){return this.width-(this.margins.left+this.margins.right)};d.prototype.innerHeight=function(){return this.height-(this.margins.top+this.margins.bottom)};d.prototype.x=
function(){return d3.scale.linear().domain(this.extent(function(a){return a.x})).range([0,this.innerWidth()])};d.prototype.y=function(){return d3.scale.linear().domain(this.extent(function(a){return a.y})).range([this.innerHeight(),0])};d.prototype.bottomAxis=function(){return d3.svg.axis().scale(this.x()).orient("bottom").ticks(this.options.ticks.bottom).tickFormat(this.options.tickFormats.bottom)};d.prototype.topAxis=function(){return d3.svg.axis().scale(this.x()).orient("top").ticks(this.options.ticks.top).tickFormat(this.options.tickFormats.top)};
d.prototype.leftAxis=function(){return d3.svg.axis().scale(this.y()).orient("left").ticks(this.options.ticks.left).tickFormat(this.options.tickFormats.left)};d.prototype.rightAxis=function(){return d3.svg.axis().scale(this.y()).orient("right").ticks(this.options.ticks.right).tickFormat(this.options.tickFormats.right)};d.prototype.draw=function(){d.__super__.draw.call(this);return this._axesDrawn?this.redrawAxes():this.drawAxes()};d.prototype.redrawAxes=function(){this.hasAxis("bottom")&&this.svg.selectAll(".x.axis.bottom").transition().duration(500).ease("linear").call(this.bottomAxis());
this.hasAxis("top")&&this.svg.selectAll(".x.axis.top").transition().duration(500).ease("linear").call(this.topAxis());this.hasAxis("left")&&this.svg.selectAll(".y.axis.left").transition().duration(500).ease("linear").call(this.leftAxis());if(this.hasAxis("right"))return this.svg.selectAll(".y.axis.right").transition().duration(500).ease("linear").call(this.rightAxis())};d.prototype.drawAxes=function(){this.hasAxis("bottom")&&this.svg.append("g").attr("class","x axis bottom").attr("transform","translate(0, "+
this.innerHeight()+")").call(this.bottomAxis());this.hasAxis("top")&&this.svg.append("g").attr("class","x axis top").call(this.topAxis());this.hasAxis("left")&&this.svg.append("g").attr("class","y axis left").call(this.leftAxis());this.hasAxis("right")&&this.svg.append("g").attr("class","y axis right").attr("transform","translate("+this.innerWidth()+", 0)").call(this.rightAxis());return this._axesDrawn=!0};return d}(Epoch.Chart.SVG)}).call(this);
(function(){var g={}.hasOwnProperty,f=function(c,b){function e(){this.constructor=c}for(var a in b)g.call(b,a)&&(c[a]=b[a]);e.prototype=b.prototype;c.prototype=new e;c.__super__=b.prototype;return c};Epoch.Chart.Area=function(c){function b(){return b.__super__.constructor.apply(this,arguments)}f(b,c);b.prototype.y=function(){var b,a,d,h,c,r,f;b=[];r=this.data;h=0;for(c=r.length;h<c;h++)for(a in d=r[h],f=d.values,f)d=f[a],null!=b[a]&&(b[a]+=d.y),null==b[a]&&(b[a]=d.y);return d3.scale.linear().domain([0,
d3.max(b)]).range([this.height-this.margins.top-this.margins.bottom,0])};b.prototype.draw=function(){var e,a,d,h;a=[this.x(),this.y()];d=a[0];h=a[1];e=d3.svg.area().x(function(a){return d(a.x)}).y0(function(a){return h(a.y0)}).y1(function(a){return h(a.y0+a.y)});d3.layout.stack().values(function(a){return a.values})(this.data);a=this.svg.selectAll(".layer").data(this.data,function(a){return a.label});a.select(".area").transition().duration(500).attr("d",function(a){return e(a.values)});a.enter().append("g").attr("class",
function(a){return a.className});a.append("path").attr("class","area").attr("d",function(a){return e(a.values)});a.exit().transition().duration(750).style("opacity",0).remove();return b.__super__.draw.call(this)};return b}(Epoch.Chart.Plot)}).call(this);
(function(){var g={}.hasOwnProperty,f=function(c,b){function e(){this.constructor=c}for(var a in b)g.call(b,a)&&(c[a]=b[a]);e.prototype=b.prototype;c.prototype=new e;c.__super__=b.prototype;return c};Epoch.Chart.Bar=function(c){function b(a){this.options=null!=a?a:{};b.__super__.constructor.call(this,this.options=Epoch.Util.defaults(this.options,e))}var e;f(b,c);e={style:"grouped"};b.prototype.x=function(){return d3.scale.ordinal().domain(Epoch.Util.domain(this.data)).rangeRoundBands([0,this.innerWidth()],
0.1)};b.prototype.x1=function(a){var d;return d3.scale.ordinal().domain(function(){var a,b,e,c;e=this.data;c=[];a=0;for(b=e.length;a<b;a++)d=e[a],c.push(d.label);return c}.call(this)).rangeRoundBands([0,a.rangeBand()],0.08)};b.prototype.y=function(){var a;a=this.extent(function(a){return a.y});a[0]=Math.min(0,a[0]);return d3.scale.linear().domain(a).range([this.height-this.margins.top-this.margins.bottom,0])};b.prototype._remapData=function(){var a,d,b,e,c,f,k,g,q,n,v,l;c={};v=this.data;f=0;for(g=
v.length;f<g;f++)for(e=v[f],a="bar "+e.className.replace(/\s*layer\s*/,""),l=e.values,k=0,q=l.length;k<q;k++)d=l[k],null==c[n=d.x]&&(c[n]=[]),c[d.x].push({label:e.label,y:d.y,className:a});d=[];for(b in c)a=c[b],d.push({group:b,values:a});return d};b.prototype.draw=function(){var a,d,h,e,c,f;a=[this.x(),this.y()];e=a[0];f=a[1];c=this.x1(e);d=this.height-this.margins.top-this.margins.bottom;a=this._remapData();a=this.svg.selectAll(".layer").data(a,function(a){return a.group});a.transition().duration(750).attr("transform",
function(a){return"translate("+e(a.group)+", 0)"});a.enter().append("g").attr("class","layer").attr("transform",function(a){return"translate("+e(a.group)+", 0)"});h=a.selectAll("rect").data(function(a){return a.values});h.transition().duration(600).attr("x",function(a){return c(a.label)}).attr("y",function(a){return f(a.y)}).attr("width",c.rangeBand()).attr("height",function(a){return d-f(a.y)});h.enter().append("rect").attr("class",function(a){return a.className}).attr("x",function(a){return c(a.label)}).attr("y",
function(a){return f(a.y)}).attr("width",c.rangeBand()).attr("height",function(a){return d-f(a.y)});h.exit().transition().duration(150).style("opacity","0").remove();a.exit().transition().duration(750).style("opacity","0").remove();return b.__super__.draw.call(this)};return b}(Epoch.Chart.Plot)}).call(this);
(function(){var g={}.hasOwnProperty,f=function(c,b){function e(){this.constructor=c}for(var a in b)g.call(b,a)&&(c[a]=b[a]);e.prototype=b.prototype;c.prototype=new e;c.__super__=b.prototype;return c};Epoch.Chart.Line=function(c){function b(){return b.__super__.constructor.apply(this,arguments)}f(b,c);b.prototype.line=function(){var b,a,d;d=[this.x(),this.y()];b=d[0];a=d[1];return d3.svg.line().x(function(a){return b(a.x)}).y(function(d){return a(d.y)})};b.prototype.draw=function(){var e,a;a=[this.x(),
this.y(),this.line()][2];e=this.svg.selectAll(".layer").data(this.data,function(a){return a.label});e.select(".line").transition().duration(500).attr("d",function(d){return a(d.values)});e.enter().append("g").attr("class",function(a){return a.className}).append("path").attr("class","line").attr("d",function(d){return a(d.values)});e.exit().transition().duration(750).style("opacity","0").remove();return b.__super__.draw.call(this)};return b}(Epoch.Chart.Plot)}).call(this);
(function(){var g={}.hasOwnProperty,f=function(c,b){function e(){this.constructor=c}for(var a in b)g.call(b,a)&&(c[a]=b[a]);e.prototype=b.prototype;c.prototype=new e;c.__super__=b.prototype;return c};Epoch.Chart.Pie=function(c){function b(a){this.options=null!=a?a:{};b.__super__.constructor.call(this,this.options=Epoch.Util.defaults(this.options,e));a=Math.max(this.width,this.height)/2;this.pie=d3.layout.pie().sort(null).value(function(a){return a.value});this.arc=d3.svg.arc().outerRadius(a-this.options.margin).innerRadius(this.options.inner);
this.svg=this.svg.append("g").attr("transform","translate("+this.width/2+", "+this.height/2+")")}var e;f(b,c);e={margin:10,inner:0};b.prototype.draw=function(){var a,d=this;a=this.svg.selectAll(".arc").data(this.pie(this.data),function(a){return a.data.label});a.enter().append("g").attr("class",function(a){return"arc pie "+a.data.className});a.select("path").attr("d",this.arc);a.select("text").attr("transform",function(a){return"translate("+d.arc.centroid(a)+")"}).text(function(a){return a.data.label});
a.append("path").attr("d",this.arc).each(function(a){return this._current=a});a.append("text").attr("transform",function(a){return"translate("+d.arc.centroid(a)+")"}).attr("dy",".35em").style("text-anchor","middle").text(function(a){return a.data.label});return a.exit().remove()};return b}(Epoch.Chart.SVG)}).call(this);
(function(){var g={}.hasOwnProperty,f=function(c,b){function e(){this.constructor=c}for(var a in b)g.call(b,a)&&(c[a]=b[a]);e.prototype=b.prototype;c.prototype=new e;c.__super__=b.prototype;return c};Epoch.Chart.Scatter=function(c){function b(a){this.options=null!=a?a:{};b.__super__.constructor.call(this,this.options=Epoch.Util.defaults(this.options,e))}var e;f(b,c);e={radius:3.5,axes:["top","bottom","left","right"]};b.prototype.draw=function(){var a,d,e,c;b.__super__.draw.call(this);a=[this.x(),
this.y()];e=a[0];c=a[1];d=this.svg.selectAll(".layer").data(this.data,function(a){return a.label});d.enter().append("g").attr("class",function(a){return a.className});a=d.selectAll(".dot").data(function(a){return a.values});a.transition().duration(500).attr("cx",function(a){return e(a.x)}).attr("cy",function(a){return c(a.y)});a.enter().append("circle").attr("class","dot").attr("r",this.options.radius).attr("cx",function(a){return e(a.x)}).attr("cy",function(a){return c(a.y)});a.exit().transition().duration(750).style("opacity",
0).remove();return d.exit().transition().duration(750).style("opacity",0).remove()};return b}(Epoch.Chart.Plot)}).call(this);
(function(){var g={}.hasOwnProperty,f=function(c,b){function e(){this.constructor=c}for(var a in b)g.call(b,a)&&(c[a]=b[a]);e.prototype=b.prototype;c.prototype=new e;c.__super__=b.prototype;return c};Epoch.Time.Plot=function(c){function b(a){var d,c,f,g,p=this;this.options=a;a=Epoch.Util.copy(this.options.margins)||{};b.__super__.constructor.call(this,this.options=Epoch.Util.defaults(this.options,e));this._queueSize=this.options.queueSize;this._queue=[];this.margins={};g=["top","right","bottom","left"];
c=0;for(f=g.length;c<f;c++)d=g[c],this.margins[d]=this.options.margins[d],null!=a[d]||this.hasAxis(d)||(this.margins[d]=6);this.svg=d3.select(this.el.get(0)).insert("svg",":first-child").attr("width",this.width).attr("height",this.height);"absolute"!==this.el.css("position")&&"relative"!==this.el.css("position")&&this.el.css("position","relative");this.canvas.attr("width",this.innerWidth());this.canvas.attr("height",this.innerHeight()+this.margins.bottom);this.canvas.css({position:"absolute",top:""+
this.margins.top+"px",left:""+this.margins.left+"px","z-index":"-1"});this.animation={interval:null,active:!1,delta:-(this.w()/this.options.fps),frame:0,duration:this.options.fps};this._prepareTimeAxes();this._prepareRangeAxes();this.animationCallback=function(){return p._animate()}}var e;f(b,c);e={fps:24,historySize:120,windowSize:40,queueSize:10,margins:{top:25,right:50,bottom:25,left:50},axes:["bottom"],ticks:{time:15,left:5,right:5},tickFormats:{top:Epoch.Formats.seconds,bottom:Epoch.Formats.seconds,
left:Epoch.Formats.si,right:Epoch.Formats.si}};b.prototype.setData=function(a){var d,b,e,c,f;this.data=[];f=[];for(e in a)c=a[e],b=Epoch.Util.copy(c),d=Math.max(0,c.values.length-this.options.historySize),b.values=c.values.slice(d),d=["layer"],d.push("category"+((e|0)+1)),null!=c.label&&d.push(Epoch.Util.dasherize(c.label)),b.className=d.join(" "),f.push(this.data.push(b));return f};b.prototype._offsetX=function(){return 0};b.prototype._prepareTimeAxes=function(){var a,d,b;this.hasAxis("bottom")&&
(a=this.bottomAxis=this.svg.append("g").attr("class","x axis bottom canvas").attr("transform","translate("+(this.margins.left-1)+", "+(this.innerHeight()+this.margins.top)+")"),a.append("path").attr("class","domain").attr("d","M0,0H"+(this.innerWidth()+1)));this.hasAxis("top")&&(a=this.topAxis=this.svg.append("g").attr("class","x axis top canvas").attr("transform","translate("+(this.margins.left-1)+", "+this.margins.top+")"),a.append("path").attr("class","domain").attr("d","M0,0H"+(this.innerWidth()+
1)));d=this.options.ticks.time;this._ticks=[];this._tickTimer=this.options.windowSize%d;a=d;for(b=[];a<this.options.windowSize;)this._pushTick(a,this.data[0].values[a].time),b.push(a+=d);return b};b.prototype._prepareRangeAxes=function(){this.hasAxis("left")&&this.svg.append("g").attr("class","y axis left").attr("transform","translate("+(this.margins.left-1)+", "+this.margins.top+")").call(this._leftAxis());if(this.hasAxis("right"))return this.svg.append("g").attr("class","y axis right").attr("transform",
"translate("+(this.width-this.margins.right)+", "+this.margins.top+")").call(this._rightAxis())};b.prototype._leftAxis=function(){return d3.svg.axis().scale(this.y()).orient("left").ticks(this.options.ticks.left).tickFormat(this.options.tickFormats.left)};b.prototype._rightAxis=function(){return d3.svg.axis().scale(this.y()).orient("right").ticks(this.options.ticks.right).tickFormat(this.options.tickFormats.right)};b.prototype.hasAxis=function(a){return-1<this.options.axes.indexOf(a)};b.prototype.innerWidth=
function(){return this.width-(this.margins.left+this.margins.right)};b.prototype.innerHeight=function(){return this.height-(this.margins.top+this.margins.bottom)};b.prototype._prepareEntry=function(a){return a};b.prototype._startTransition=function(){if(!0!==this.animation.active&&0!==this._queue.length)return this._shift(),this.animation.active=!0,this.animation.interval=setInterval(this.animationCallback,1E3/this.options.fps)};b.prototype._stopTransition=function(){var a,d,b,c;if(this.inTransition()){c=
this.data;d=0;for(b=c.length;d<b;d++)a=c[d],a.values.shift();d=[this._ticks[0],this._ticks[this._ticks.length-1]];a=d[0];d=d[1];null!=d&&d.enter&&(d.enter=!1,d.opacity=1);null!=a&&a.exit&&this._shiftTick();this.animation.frame=0;if(0<this._queue.length)return this._shift();this.animation.active=!1;return clearInterval(this.animation.interval)}};b.prototype.inTransition=function(){return this.animation.active};b.prototype.push=function(a){this._queue.length>this._queueSize&&this._queue.splice(this._queueSize,
this._queue.length-this._queueSize);if(this._queue.length===this._queueSize)return!1;this._queue.push(this._prepareEntry(a));if(!this.inTransition())return this._startTransition()};b.prototype._shift=function(){var a,d,b,c;a=this._queue.shift();c=this.data;for(d in c)b=c[d],b.values.push(a[d]);this._updateTicks(a[0].time);this.hasAxis("left")&&this.svg.selectAll(".y.axis.left").transition().duration(500).ease("linear").call(this._leftAxis());if(this.hasAxis("right"))return this.svg.selectAll(".y.axis.right").transition().duration(500).ease("linear").call(this._rightAxis())};
b.prototype._animate=function(){if(this.inTransition())return++this.animation.frame===this.animation.duration&&this._stopTransition(),this.draw(this.animation.frame*this.animation.delta),this._updateTimeAxes()};b.prototype.y=function(){return d3.scale.linear().domain(this.extent(function(a){return a.y})).range([this.innerHeight(),0])};b.prototype.w=function(){return this.innerWidth()/this.options.windowSize};b.prototype._updateTicks=function(a){if(this.hasAxis("top")||this.hasAxis("bottom"))if(++this._tickTimer%
this.options.ticks.time||this._pushTick(this.options.windowSize,a,!0),!(0<=this._ticks[0].x-this.w()))return this._ticks[0].exit=!0};b.prototype._pushTick=function(a,b,c){null==c&&(c=!1);if(this.hasAxis("top")||this.hasAxis("bottom"))return b={time:b,x:a*this.w()+this._offsetX(),opacity:c?0:1,enter:c?!0:!1,exit:!1},this.hasAxis("bottom")&&(a=this.bottomAxis.append("g").attr("class","tick major").attr("transform","translate("+(b.x+1)+",0)").style("opacity",b.opacity),a.append("line").attr("y2",6),
a.append("text").attr("text-anchor","middle").attr("dy",19).text(this.options.tickFormats.bottom(b.time)),b.bottomEl=$(a[0])),this.hasAxis("top")&&(a=this.topAxis.append("g").attr("class","tick major").attr("transform","translate("+(b.x+1)+",0)").style("opacity",b.opacity),a.append("line").attr("y2",-6),a.append("text").attr("text-anchor","middle").attr("dy",-10).text(this.options.tickFormats.top(b.time)),b.topEl=$(a[0])),this._ticks.push(b),b};b.prototype._shiftTick=function(){var a;if(0<this._ticks.length&&
(a=this._ticks.shift(),null!=a.topEl&&a.topEl.remove(),null!=a.bottomEl))return a.bottomEl.remove()};b.prototype._updateTimeAxes=function(){var a,b,c,e,f,g,k;if(this.hasAxis("top")||this.hasAxis("bottom")){a=[this.animation.delta,1/this.options.fps];b=a[0];a=a[1];g=this._ticks;k=[];e=0;for(f=g.length;e<f;e++)c=g[e],c.x+=b,this.hasAxis("bottom")&&c.bottomEl.attr("transform","translate("+(c.x+1)+",0)"),this.hasAxis("top")&&c.topEl.attr("transform","translate("+(c.x+1)+",0)"),c.enter?c.opacity+=a:c.exit&&
(c.opacity-=a),c.enter||c.exit?(this.hasAxis("bottom")&&c.bottomEl.css("opacity",c.opacity),this.hasAxis("top")?k.push(c.topEl.css("opacity",c.opacity)):k.push(void 0)):k.push(void 0);return k}};b.prototype.clear=function(){return this.ctx.clearRect(0,0,this.width,this.height)};b.prototype.draw=function(a){};return b}(Epoch.Chart.Canvas);Epoch.Time.Stack=function(c){function b(){return b.__super__.constructor.apply(this,arguments)}f(b,c);b.prototype._prepareEntry=function(b){var a,d,c,f;c=d=0;for(f=
b.length;c<f;c++)a=b[c],a.y0=d,d+=a.y;return b};b.prototype.setData=function(c){var a,d,h,f,g;b.__super__.setData.call(this,c);g=[];a=c=0;for(f=this.data[0].values.length;0<=f?c<f:c>f;a=0<=f?++c:--c)h=0,g.push(function(){var b,c,e,f;e=this.data;f=[];b=0;for(c=e.length;b<c;b++)d=e[b],d.values[a].y0=h,f.push(h+=d.values[a].y);return f}.call(this));return g};b.prototype.extent=function(){var b,a,c,f,g,r,p,k;b=g=c=0;for(p=this.data[0].values.length;0<=p?g<p:g>p;b=0<=p?++g:--g){a=r=f=0;for(k=this.data.length;0<=
k?r<k:r>k;a=0<=k?++r:--r)f+=this.data[a].values[b].y;f>c&&(c=f)}return[0,c]};return b}(Epoch.Time.Plot)}).call(this);
(function(){var g={}.hasOwnProperty,f=function(c,b){function e(){this.constructor=c}for(var a in b)g.call(b,a)&&(c[a]=b[a]);e.prototype=b.prototype;c.prototype=new e;c.__super__=b.prototype;return c};Epoch.Time.Area=function(c){function b(){return b.__super__.constructor.apply(this,arguments)}f(b,c);b.prototype.setStyles=function(b){b=null!=b.className?this.getStyles("g."+b.className.replace(/\s/g,".")+" path.area"):this.getStyles("g path.area");this.ctx.fillStyle=b.fill;null!=b.stroke&&(this.ctx.strokeStyle=
b.stroke);if(null!=b["stroke-width"])return this.ctx.lineWidth=b["stroke-width"].replace("px","")};b.prototype.draw=function(b){var a,c,f,g,r,p,k,m;null==b&&(b=0);this.clear();c=[this.y(),this.w()];r=c[0];g=c[1];m=[];for(c=p=k=this.data.length-1;0>=k?0>=p:0<=p;c=0>=k?++p:--p){f=this.data[c];this.setStyles(f);this.ctx.beginPath();f=f.values;for(c in f)a=f[c],a=[c*g+b,r(a.y+a.y0)],0===c?this.ctx.moveTo.apply(this.ctx,a):this.ctx.lineTo.apply(this.ctx,a);this.ctx.lineTo(this.width+this.w(),this.innerHeight());
this.ctx.lineTo(-this.w(),this.innerHeight());this.ctx.closePath();m.push(this.ctx.fill())}return m};return b}(Epoch.Time.Stack)}).call(this);
(function(){var g={}.hasOwnProperty,f=function(c,b){function e(){this.constructor=c}for(var a in b)g.call(b,a)&&(c[a]=b[a]);e.prototype=b.prototype;c.prototype=new e;c.__super__=b.prototype;return c};Epoch.Time.Bar=function(c){function b(){return b.__super__.constructor.apply(this,arguments)}f(b,c);b.prototype._offsetX=function(){return 0.5*this.w()};b.prototype.setStyles=function(b){b=this.getStyles("rect.bar."+b.replace(/\s/g,"."));this.ctx.fillStyle=b.fill;this.ctx.strokeStyle=b.stroke;if(null!=
b["stroke-width"])return this.ctx.lineWidth=b["stroke-width"].replace("px","")};b.prototype.draw=function(b){var a,c,f,g,r,p,k,m,q,n,v,l,z;null==b&&(b=0);this.clear();n=[this.y(),this.w()];q=n[0];m=n[1];l=this.data;z=[];n=0;for(v=l.length;n<v;n++)k=l[n],this.setStyles(k.className),z.push(function(){var l,n,s;l=k.values;s=[];for(p in l)c=l[p],n=[p*m+b,c.y,c.y0],f=n[0],g=n[1],r=n[2],a=[f+1,q(g+r),m-2,this.innerHeight()-q(g)+0.5],this.ctx.fillRect.apply(this.ctx,a),s.push(this.ctx.strokeRect.apply(this.ctx,
a));return s}.call(this));return z};return b}(Epoch.Time.Stack)}).call(this);
(function(){var g={}.hasOwnProperty,f=function(c,b){function e(){this.constructor=c}for(var a in b)g.call(b,a)&&(c[a]=b[a]);e.prototype=b.prototype;c.prototype=new e;c.__super__=b.prototype;return c};Epoch.Time.Gauge=function(c){function b(a){this.options=null!=a?a:{};b.__super__.constructor.call(this,this.options=Epoch.Util.defaults(this.options,e));this.lastValue=this.value=this.options.value}var e;f(b,c);e={domain:[0,1],ticks:10,tickSize:5,tickOffset:5};b.prototype.theta=function(){return d3.scale.linear().domain(this.options.domain).range([-1.125*
Math.PI,Math.PI/8])};b.prototype.setStyles=function(a){a=this.getStyles(a);this.ctx.fillStyle=a.fill;this.ctx.strokeStyle=a.stroke;return this.ctx.lineWidth=a["stroke-width"].replace("px","")};b.prototype.draw=function(){var a,b,c,e,f,g,k,m,q,n;this.ctx.clearRect(0,0,this.width,this.height);f=[this.width/2,0.68*this.height,this.height/1.58];c=f[0];e=f[1];f=f[2];k=d3.scale.linear().domain([0,this.options.ticks]).range([-1.125*Math.PI,Math.PI/8]);this.setStyles(".epoch .gauge .tick");this.ctx.beginPath();
a=q=0;for(n=this.options.ticks;0<=n?q<=n:q>=n;a=0<=n?++q:--q)a=k(a),a=[Math.cos(a),Math.sin(a)],b=a[0],g=a[1],a=b*(f-this.options.tickOffset)+c,m=g*(f-this.options.tickOffset)+e,b=b*(f-this.options.tickOffset-this.options.tickSize)+c,g=g*(f-this.options.tickOffset-this.options.tickSize)+e,this.ctx.moveTo(a,m),this.ctx.lineTo(b,g);this.ctx.stroke();this.setStyles(".epoch .gauge .arc.outer");this.ctx.beginPath();this.ctx.arc(c,e,f,-1.125*Math.PI,0.125*Math.PI,!1);this.ctx.stroke();this.setStyles(".epoch .gauge .arc.inner");
this.ctx.beginPath();this.ctx.arc(c,e,f-10,-1.125*Math.PI,0.125*Math.PI,!1);return this.ctx.stroke()};return b}(Epoch.Chart.Canvas)}).call(this);
(function(){var g={}.hasOwnProperty,f=function(c,b){function e(){this.constructor=c}for(var a in b)g.call(b,a)&&(c[a]=b[a]);e.prototype=b.prototype;c.prototype=new e;c.__super__=b.prototype;return c};Epoch.Time.Line=function(c){function b(){return b.__super__.constructor.apply(this,arguments)}f(b,c);b.prototype.setStyles=function(b){b=this.getStyles("g."+b.replace(/\s/g,".")+" path.line");this.ctx.fillStyle=b.fill;this.ctx.strokeStyle=b.stroke;return this.ctx.lineWidth=b["stroke-width"].replace("px",
"")};b.prototype.draw=function(b){var a,c,f,g,r,p,k,m,q;null==b&&(b=0);this.clear();g=[this.y(),this.w()];r=g[0];g=g[1];m=this.data;q=[];p=0;for(k=m.length;p<k;p++){f=m[p];this.setStyles(f.className);this.ctx.beginPath();f=f.values;for(c in f)a=f[c],a=[c*g+b,r(a.y)],0===c?this.ctx.moveTo.apply(this.ctx,a):this.ctx.lineTo.apply(this.ctx,a);q.push(this.ctx.stroke())}return q};return b}(Epoch.Time.Plot)}).call(this);
(function(){Epoch._typeMap={area:Epoch.Chart.Area,bar:Epoch.Chart.Bar,line:Epoch.Chart.Line,pie:Epoch.Chart.Pie,scatter:Epoch.Chart.Scatter,"time.area":Epoch.Time.Area,"time.bar":Epoch.Time.Bar,"time.line":Epoch.Time.Line}}).call(this);(function(){jQuery.fn.epoch=function(g){var f;g.el=this;if(null==(f=this.data("epoch-chart"))){f=Epoch._typeMap[g.type];if(null==f)throw"Epoch Error: Unknown chart type '"+g.type+"'";this.data("epoch-chart",f=new f(g));f.draw()}return f}}).call(this);
