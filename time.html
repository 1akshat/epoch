<!DOCTYPE html>
<html>
  <head>
    <title>fastly-d3 test page</title>
    <script src="http://code.jquery.com/jquery-1.10.1.min.js"></script>
    <script src="js/d3.min.js"></script>
    <script src="js/put.js"></script>
    <script src="js/fastly-charts/test_data.js"></script>
    <script src="js/fastly-charts.js"></script>
    <link rel="stylesheet" type="text/css" href="css/fastly-charts.css">
    <style type="text/css">
      /*canvas {
        background: pink;
      }
*/

      /*.sparklines .line {
        fill: none;
        stroke-width: 1px;
      }*/


    </style>
  </head>
  <body>
    <h1>Fastly Timeseries Test Page</h1>
    <div id="line" class="chart sparklines" style="width: 812px; height: 40px;margin-left: 44px;"></div>
    <div id="bar" class="chart" style="width: 900px; height: 200px;"></div>
    <div id="area" class="chart" style="width: 900px; height: 200px;"></div>
    

    Interval: <input type="text" name="interval" value="1000"> <button id="begin">Play</button>

    <script>
      $(function() {
        var bar = new F.Time.Bar({
          el: '#bar',
          data: TIME_DATA,
          axes: ['left', 'bottom', 'right', 'top']
        });
        bar.draw();

        var line = new F.Time.Line({
          el: '#line', data: TIME_DATA, axes: []
        });
        line.draw();

        var area = new F.Time.Area({
          el: '#area', data: TIME_DATA, axes: ['left', 'bottom', 'right']
        });
        area.draw();


        function pushData() {
          var entry = nextTimeEntry();
          bar.push(entry);
          line.push(entry);
          area.push(entry);
        }

        var dataInterval = null;

        $('#begin').click(function(e) {
          target = $(e.target)
          if (target.html().toLowerCase() == 'play') {
            dataInterval = setInterval(pushData, parseInt($('[name=interval]').val()));
            target.html('Pause')
          }
          else {
            clearInterval(dataInterval)
            target.html('Play')
          }
        });
          

        
      });
    </script>
  </body>
</html>